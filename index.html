
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+2:wght@700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; color: #fff; font-family: 'Noto Sans JP', sans-serif; overflow-x: hidden; }
        .header { background: #C0FFC0; color: #000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; border-bottom: 2px solid #000; }
        .header-title { font-family: 'M PLUS 2', sans-serif; font-size: 1.5rem; }
        .header-time { font-family: 'M PLUS 2', sans-serif; font-size: 1.1rem; font-weight: bold; }
        .board { display: grid; grid-template-columns: 1fr; gap: 0; width: 100%; }
        @media (min-width: 1000px) { .board { grid-template-columns: 1fr 1fr; gap: 0 10px; padding: 5px; } }
        details { border-bottom: 1px solid #333; width: 100%; }
        summary { background: #1a1a1a; color: #C0FFC0; padding: 12px 20px; font-weight: bold; cursor: pointer; list-style: none; position: relative; border-bottom: 1px solid #333; }
        summary::after { content: '▼'; position: absolute; right: 20px; font-size: 0.8rem; transition: 0.3s; }
        details[open] summary::after { transform: rotate(180deg); }
        .row { display: flex; align-items: center; padding: 12px 15px; background: #000; border-bottom: 1px solid #222; min-height: 90px; }
        .line-box { width: 200px; display: flex; align-items: center; gap: 12px; flex-shrink: 0; }
        .line-bar { width: 10px; height: 50px; border-radius: 2px; }
        .line-name { font-size: 1.4rem; font-weight: 900; line-height: 1.2; letter-spacing: -0.5px; }
        .symbol-box { width: 60px; text-align: center; font-size: 2.5rem; font-weight: bold; flex-shrink: 0; }
        .info-box { flex: 1; padding-left: 20px; }
        .status-text { font-size: 1.2rem; font-weight: bold; margin-bottom: 2px; }
        .detail-text { font-size: 0.85rem; color: #aaa; }
        #admin-panel { display: none; background: #111; padding: 20px; border: 3px solid #C0FFC0; margin: 10px; border-radius: 8px; }
        .admin-item { margin-bottom: 12px; }
        .admin-label { display: block; color: #C0FFC0; font-size: 0.9rem; font-weight: bold; margin-bottom: 4px; }
        .admin-input { width: 100%; background: #222; color: #fff; border: 1px solid #444; padding: 10px; border-radius: 4px; font-size: 1rem; }
        .save-btn { background: #C0FFC0; color: #000; padding: 15px; border: none; font-weight: bold; cursor: pointer; width: 100%; font-size: 1.1rem; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-title">札幌周辺 交通情報のご案内</div>
        <div class="header-time">2026/01/31 21:32</div>
    </div>
    <div id="admin-panel">
        <h3 style="color:#C0FFC0; margin-bottom:15px;">備考手動修正モード</h3>
        <div id="form-container"></div>
        <button class="save-btn" onclick="saveManual()">保存して更新</button>
    </div>
    <div class="board"><details open><summary>JR北海道</summary>
            <div class="row" id="row-jr_h">
                <div class="line-box">
                    <div class="line-bar" style="background:#44AF35;"></div>
                    <div class="line-name">函館・千歳線</div>
                </div>
                <div class="symbol-box" style="color:#FF8C00;">△</div>
                <div class="info-box">
                    <div class="status-text" style="color:#FF8C00;">運休・遅延</div>
                    <div class="detail-text" id="text-jr_h">当日分の運休・遅延情報があります。公式サイトを確認してください。</div>
                </div>
            </div>
            <div class="row" id="row-jr_a">
                <div class="line-box">
                    <div class="line-bar" style="background:#44AF35;"></div>
                    <div class="line-name">エアポート</div>
                </div>
                <div class="symbol-box" style="color:#FF8C00;">△</div>
                <div class="info-box">
                    <div class="status-text" style="color:#FF8C00;">運休・遅延</div>
                    <div class="detail-text" id="text-jr_a">当日分の運休・遅延情報があります。公式サイトを確認してください。</div>
                </div>
            </div>
            <div class="row" id="row-jr_g">
                <div class="line-box">
                    <div class="line-bar" style="background:#44AF35;"></div>
                    <div class="line-name">学園都市線</div>
                </div>
                <div class="symbol-box" style="color:#FF8C00;">△</div>
                <div class="info-box">
                    <div class="status-text" style="color:#FF8C00;">運休・遅延</div>
                    <div class="detail-text" id="text-jr_g">当日分の運休・遅延情報があります。公式サイトを確認してください。</div>
                </div>
            </div></details><details open><summary>札幌市営</summary>
            <div class="row" id="row-sub_n">
                <div class="line-box">
                    <div class="line-bar" style="background:#008000;"></div>
                    <div class="line-name">南北線</div>
                </div>
                <div class="symbol-box" style="color:#C0FFC0;">◯</div>
                <div class="info-box">
                    <div class="status-text" style="color:#C0FFC0;">平常運転</div>
                    <div class="detail-text" id="text-sub_n">10分以上の遅れはありません</div>
                </div>
            </div>
            <div class="row" id="row-sub_z">
                <div class="line-box">
                    <div class="line-bar" style="background:#FFC000;"></div>
                    <div class="line-name">東西線</div>
                </div>
                <div class="symbol-box" style="color:#C0FFC0;">◯</div>
                <div class="info-box">
                    <div class="status-text" style="color:#C0FFC0;">平常運転</div>
                    <div class="detail-text" id="text-sub_z">10分以上の遅れはありません</div>
                </div>
            </div>
            <div class="row" id="row-sub_h">
                <div class="line-box">
                    <div class="line-bar" style="background:#4080FF;"></div>
                    <div class="line-name">東豊線</div>
                </div>
                <div class="symbol-box" style="color:#C0FFC0;">◯</div>
                <div class="info-box">
                    <div class="status-text" style="color:#C0FFC0;">平常運転</div>
                    <div class="detail-text" id="text-sub_h">10分以上の遅れはありません</div>
                </div>
            </div>
            <div class="row" id="row-tram">
                <div class="line-box">
                    <div class="line-bar" style="background:#C0C0C0;"></div>
                    <div class="line-name">札幌市電</div>
                </div>
                <div class="symbol-box" style="color:#FF8C00;">△</div>
                <div class="info-box">
                    <div class="status-text" style="color:#FF8C00;">運休・遅延</div>
                    <div class="detail-text" id="text-tram">運行状況にご注意ください</div>
                </div>
            </div></details><details open><summary>路線バス</summary>
            <div class="row" id="row-bus_jr">
                <div class="line-box">
                    <div class="line-bar" style="background:#4040FF;"></div>
                    <div class="line-name">JR北海道バス</div>
                </div>
                <div class="symbol-box" style="color:#C0FFC0;">◯</div>
                <div class="info-box">
                    <div class="status-text" style="color:#C0FFC0;">平常運転</div>
                    <div class="detail-text" id="text-bus_jr">平常通り運転中</div>
                </div>
            </div>
            <div class="row" id="row-bus_ch">
                <div class="line-box">
                    <div class="line-bar" style="background:#FF4040;"></div>
                    <div class="line-name">中央バス</div>
                </div>
                <div class="symbol-box" style="color:#C0FFC0;">◯</div>
                <div class="info-box">
                    <div class="status-text" style="color:#C0FFC0;">平常運転</div>
                    <div class="detail-text" id="text-bus_ch">平常通り運転中</div>
                </div>
            </div>
            <div class="row" id="row-bus_jo">
                <div class="line-box">
                    <div class="line-bar" style="background:#FF8000;"></div>
                    <div class="line-name">じょうてつ</div>
                </div>
                <div class="symbol-box" style="color:#C0FFC0;">◯</div>
                <div class="info-box">
                    <div class="status-text" style="color:#C0FFC0;">平常運転</div>
                    <div class="detail-text" id="text-bus_jo">平常通り運転中</div>
                </div>
            </div></details><details open><summary>高速道路</summary>
            <div class="row" id="row-hw_s">
                <div class="line-box">
                    <div class="line-bar" style="background:#43AF35;"></div>
                    <div class="line-name">札樽道・後志道</div>
                </div>
                <div class="symbol-box" style="color:#FF8C00;">△</div>
                <div class="info-box">
                    <div class="status-text" style="color:#FF8C00;">一部通行止</div>
                    <div class="detail-text" id="text-hw_s">規制または通行止めがあります</div>
                </div>
            </div>
            <div class="row" id="row-hw_d">
                <div class="line-box">
                    <div class="line-bar" style="background:#43AF35;"></div>
                    <div class="line-name">道央道・道東道</div>
                </div>
                <div class="symbol-box" style="color:#FF8C00;">△</div>
                <div class="info-box">
                    <div class="status-text" style="color:#FF8C00;">一部通行止</div>
                    <div class="detail-text" id="text-hw_d">規制または通行止めがあります</div>
                </div>
            </div></details>
    </div>
    <script>
        const DB_KEY = 'sap_traffic_v11';
        function checkDailyReset() {
            const now = new Date();
            let resetTime = new Date();
            resetTime.setHours(3, 0, 0, 0);
            if (now < resetTime) { resetTime.setDate(resetTime.getDate() - 1); }
            const lastReset = localStorage.getItem('last_reset');
            if (!lastReset || lastReset !== resetTime.getTime().toString()) {
                localStorage.removeItem(DB_KEY);
                localStorage.setItem('last_reset', resetTime.getTime().toString());
            }
        }
        function checkHash() {
            document.getElementById('admin-panel').style.display = (window.location.hash === '#admin') ? 'block' : 'none';
        }
        function saveManual() {
            const notes = {};
            document.querySelectorAll('.admin-input').forEach(i => { notes[i.dataset.id] = i.value; });
            localStorage.setItem(DB_KEY, JSON.stringify(notes));
            window.location.hash = ''; window.location.reload();
        }
        window.onload = () => {
            checkDailyReset();
            const saved = JSON.parse(localStorage.getItem(DB_KEY) || '{}');
            const form = document.getElementById('form-container');
            document.querySelectorAll('.row').forEach(row => {
                const id = row.id.replace('row-', '');
                const name = row.querySelector('.line-name').innerText;
                const detailEl = document.getElementById('text-' + id);
                form.innerHTML += `<div class="admin-item"><label class="admin-label">${name}</label><input class="admin-input" data-id="${id}" value="${saved[id] || ''}"></div>`;
                if (saved[id] && saved[id].trim() !== "") {
                    detailEl.innerText = saved[id];
                    detailEl.style.color = "#FFD700";
                    detailEl.style.fontWeight = "bold";
                }
            });
            checkHash();
        };
        window.onhashchange = checkHash;
    </script>
</body>
</html>